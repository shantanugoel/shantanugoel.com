<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Code Hilighting on Shantanu Vs The World</title><link>https://shantanugoel.com/tags/code-hilighting/</link><description>Recent content in Code Hilighting on Shantanu Vs The World</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 23 Mar 2008 17:18:22 +0000</lastBuildDate><atom:link href="https://shantanugoel.com/tags/code-hilighting/index.xml" rel="self" type="application/rss+xml"/><item><title>HACK: Fixing The Code Syntax Highlighter WordPress Plugins To Work With WYSIWYG</title><link>https://shantanugoel.com/2008/03/23/hack-fixing-the-code-syntax-highlighter-wordpress-plugins-to-work-with-wysiwyg/</link><pubDate>Sun, 23 Mar 2008 17:18:22 +0000</pubDate><guid>https://shantanugoel.com/2008/03/23/hack-fixing-the-code-syntax-highlighter-wordpress-plugins-to-work-with-wysiwyg/</guid><description>&lt;p>There are many code syntax highlighter plugins available for WordPress (e.g. iG Syntax Highlighter, WP-Syntax, etc) but almost all of them have a problem. They want you to write the code in &amp;ldquo;HTML editing mode&amp;rdquo;. If you use any kind of WYSIWYG or visual editors (like built in TinyMCE or offline clients&amp;rsquo; similar modes), there is a grave problem. Your code becomes garbled. e.g.&lt;/p>
&lt;p>If you intend to write:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cat abc &amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>It might turn out as:&lt;/p></description><content>&lt;p>There are many code syntax highlighter plugins available for WordPress (e.g. iG Syntax Highlighter, WP-Syntax, etc) but almost all of them have a problem. They want you to write the code in &amp;ldquo;HTML editing mode&amp;rdquo;. If you use any kind of WYSIWYG or visual editors (like built in TinyMCE or offline clients&amp;rsquo; similar modes), there is a grave problem. Your code becomes garbled. e.g.&lt;/p>
&lt;p>If you intend to write:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cat abc &amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>It might turn out as:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span>&amp;lt;&lt;span style="color:#f92672">p&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#f92672">p&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;&lt;span style="color:#f92672">p&lt;/span>&amp;gt;&amp;amp;nbsp;cat abc &amp;amp;gt; /dev/null&amp;lt;/&lt;span style="color:#f92672">p&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;&lt;span style="color:#f92672">p&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#f92672">p&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The issue here is that the code highlighting plugins use the &amp;ldquo;exact&amp;rdquo; text entered within the [ code ] (or similar) tags, and since we used the WYSIWYG/visual editors, they add html formatting tags to the code and also convert some special characters into HTML entities (e.g. &amp;gt; into &amp;gt;, &amp;lt; into &amp;lt;, white space into Â , etc).&lt;/p>
&lt;p>The workaround is that you can write the code in html editing mode. But the problem here is that if you happen to switch to the visual mode or edit your post in this mode any time later, the problem will come back which makes editing posts a pain. So, here is a simple hack that will let you write your code in visual/WYSIWYG mode without doing anything special.&lt;/p>
&lt;p>**Note: **Although this hack is for &lt;a href="http://blog.igeek.info/still-fresh/2006/02/25/code-for-fun/">iG:Synatx Highlighter&lt;/a> plugin, but it can be added similarly to other plugins as well.&lt;/p>
&lt;p>Step 1) Open the file syntax_hilite.php.&lt;/p>
&lt;p>Step 2) Go to line no. 191 and delete the following 3 lines:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>$arrSearch &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">array&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;&amp;lt; &amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;lt; &amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34; &amp;gt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34; &amp;amp;gt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;lt;&amp;amp;nbsp;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;lt;&amp;amp;nbsp;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;nbsp;&amp;gt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;nbsp;&amp;amp;gt;&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$arrReplace &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">array&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;&amp;lt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;lt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;gt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;gt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;lt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;lt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;gt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;gt;&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$inTxt &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">str_replace&lt;/span>($arrSearch, $arrReplace, $inTxt);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Step 3) At the same place (from where you deleted the lines), add the following lines:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>$inTxt &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">strip_tags&lt;/span>($inTxt);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#66d9ef">PHP_VERSION&lt;/span> &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">5.0&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $inTxt &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">html_entity_decode&lt;/span>($inTxt, &lt;span style="color:#a6e22e">ENT_QUOTES&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;UTF-8&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $arrSearch &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">array&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;&amp;amp;lt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;gt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;nbsp;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;amp;&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $arrReplace &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">array&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;&amp;lt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;gt;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34; &amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;amp;&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $inTxt &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">str_replace&lt;/span>($arrSearch, $arrReplace, $inTxt);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Step 4) Save the file. That&amp;rsquo;s it. You&amp;rsquo;re done.&lt;/p>
&lt;p>What we just did was strip out all the extraneous html formatting added by your editor and then convert the html entities into the characters that we want.&lt;/p>
&lt;p>**IMPORTANT: **After this hack, you should write your code in visual mode. If you want to display some html code to your readers and write it in html mode of the editor then it might go boink. Otherwise it should be simple enough to create a new tag so that one set html editor code works and for another set, visual editor code works. But I would definitely recommend against it and anyways writing all code in visual mode, just like your other parts of your posts as its much more intuitive to write and easier to maintain and port to newer platforms.&lt;/p></content></item></channel></rss>