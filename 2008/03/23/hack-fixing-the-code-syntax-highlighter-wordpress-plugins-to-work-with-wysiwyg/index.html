<!doctype html><html lang=en><head><title>HACK: Fixing The Code Syntax Highlighter WordPress Plugins To Work With WYSIWYG :: Shantanu Vs The World</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="There are many code syntax highlighter plugins available for WordPress (e.g. iG Syntax Highlighter, WP-Syntax, etc) but almost all of them have a problem. They want you to write the code in &ldquo;HTML editing mode&rdquo;. If you use any kind of WYSIWYG or visual editors (like built in TinyMCE or offline clients&rsquo; similar modes), there is a grave problem. Your code becomes garbled. e.g.
If you intend to write:
cat abc > /dev/null It might turn out as:
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://shantanugoel.com/2008/03/23/hack-fixing-the-code-syntax-highlighter-wordpress-plugins-to-work-with-wysiwyg/><link rel=stylesheet href=https://shantanugoel.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css><link rel=stylesheet href=https://shantanugoel.com/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css><link rel=stylesheet href=https://shantanugoel.com/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css><link rel=stylesheet href=https://shantanugoel.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css><link rel=stylesheet href=https://shantanugoel.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://shantanugoel.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css><link rel=stylesheet href=https://shantanugoel.com/css/main.min.fe8dc560fccb53a458b0db19ccb7b265764ac46b68596b7e099c6793054dd457.css><link rel=stylesheet href=https://shantanugoel.com/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css><link rel=stylesheet href=https://shantanugoel.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css><link rel=stylesheet href=https://shantanugoel.com/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css><link rel=stylesheet href=https://shantanugoel.com/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css><link rel=stylesheet href=https://shantanugoel.com/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css><link rel=stylesheet href=https://shantanugoel.com/css/terminal.min.dd0bf9c7cacb24c1b0184f52f1869b274e06689557468cc7030ccf632328eb97.css><link rel=stylesheet href=https://shantanugoel.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel="shortcut icon" href=https://shantanugoel.com/favicon.png><link rel=apple-touch-icon href=https://shantanugoel.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="HACK: Fixing The Code Syntax Highlighter WordPress Plugins To Work With WYSIWYG"><meta property="og:description" content="There are many code syntax highlighter plugins available for WordPress (e.g. iG Syntax Highlighter, WP-Syntax, etc) but almost all of them have a problem. They want you to write the code in &ldquo;HTML editing mode&rdquo;. If you use any kind of WYSIWYG or visual editors (like built in TinyMCE or offline clients&rsquo; similar modes), there is a grave problem. Your code becomes garbled. e.g.
If you intend to write:
cat abc > /dev/null It might turn out as:
"><meta property="og:url" content="https://shantanugoel.com/2008/03/23/hack-fixing-the-code-syntax-highlighter-wordpress-plugins-to-work-with-wysiwyg/"><meta property="og:site_name" content="Shantanu Vs The World"><meta property="og:image" content="https://shantanugoel.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="Code"><meta property="article:published_time" content="2008-03-23 17:18:22 +0000 UTC"></head><body><div class=container><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Shantanu vs The World</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;‚ñæ</li><li><ul class=menu__dropdown><li><a href=https://github.com/shantanugoel/>üíª</a></li><li><a href=https://x.com/shantanugoel/>üê§</a></li><li><a href=/>/blog</a></li><li><a href=/notes>/notes</a></li><li><a href=/about>/about</a></li><li><a href=/archives>/archives</a></li><li><a href=/categories>/categories</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=https://github.com/shantanugoel/>üíª</a></li><li><a href=https://x.com/shantanugoel/>üê§</a></li><li><a href=/>/blog</a></li><li><a href=/notes>/notes</a></li><li><a href=/about>/about</a></li><li><a href=/archives>/archives</a></li><li><a href=/categories>/categories</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://shantanugoel.com/2008/03/23/hack-fixing-the-code-syntax-highlighter-wordpress-plugins-to-work-with-wysiwyg/>HACK: Fixing The Code Syntax Highlighter WordPress Plugins To Work With WYSIWYG</a></h1><div class=post-meta><time class=post-date>2008-03-23</time><span class=post-author>Shantanu Goel</span></div><span class=post-tags>#<a href=https://shantanugoel.com/tags/code-hilighting/>code hilighting</a>&nbsp;
#<a href=https://shantanugoel.com/tags/hack/>Hack</a>&nbsp;
#<a href=https://shantanugoel.com/tags/html-editor/>html editor</a>&nbsp;
#<a href=https://shantanugoel.com/tags/html-entities/>html entities</a>&nbsp;
#<a href=https://shantanugoel.com/tags/html_entity_decode/>html_entity_decode</a>&nbsp;
#<a href=https://shantanugoel.com/tags/igsyntax-hiliter/>iG:Syntax Hiliter</a>&nbsp;
#<a href=https://shantanugoel.com/tags/plugin/>plugin</a>&nbsp;
#<a href=https://shantanugoel.com/tags/strip_tags/>strip_tags</a>&nbsp;
#<a href=https://shantanugoel.com/tags/tinymce/>TinyMCE</a>&nbsp;
#<a href=https://shantanugoel.com/tags/visual-editor/>visual editor</a>&nbsp;
#<a href=https://shantanugoel.com/tags/wordpress/>wordpress</a>&nbsp;
#<a href=https://shantanugoel.com/tags/wp-syntax/>WP-Syntax</a>&nbsp;
#<a href=https://shantanugoel.com/tags/wysiwyg/>wysiwyg</a>&nbsp;</span><div class=post-content><div><p>There are many code syntax highlighter plugins available for WordPress (e.g. iG Syntax Highlighter, WP-Syntax, etc) but almost all of them have a problem. They want you to write the code in &ldquo;HTML editing mode&rdquo;. If you use any kind of WYSIWYG or visual editors (like built in TinyMCE or offline clients&rsquo; similar modes), there is a grave problem. Your code becomes garbled. e.g.</p><p>If you intend to write:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat abc &gt; /dev/null
</span></span></code></pre></div><p>It might turn out as:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>p</span>&gt;&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>p</span>&gt;&amp;nbsp;cat abc &amp;gt; /dev/null&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>p</span>&gt;&lt;/<span style=color:#f92672>p</span>&gt;
</span></span></code></pre></div><p>The issue here is that the code highlighting plugins use the &ldquo;exact&rdquo; text entered within the [ code ] (or similar) tags, and since we used the WYSIWYG/visual editors, they add html formatting tags to the code and also convert some special characters into HTML entities (e.g. > into >, &lt; into &lt;, white space into ¬†, etc).</p><p>The workaround is that you can write the code in html editing mode. But the problem here is that if you happen to switch to the visual mode or edit your post in this mode any time later, the problem will come back which makes editing posts a pain. So, here is a simple hack that will let you write your code in visual/WYSIWYG mode without doing anything special.</p><p>**Note: **Although this hack is for <a href=http://blog.igeek.info/still-fresh/2006/02/25/code-for-fun/>iG:Synatx Highlighter</a> plugin, but it can be added similarly to other plugins as well.</p><p>Step 1) Open the file syntax_hilite.php.</p><p>Step 2) Go to line no. 191 and delete the following 3 lines:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$arrSearch <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#34;&lt; &#34;</span>, <span style=color:#e6db74>&#34;&amp;lt; &#34;</span>, <span style=color:#e6db74>&#34; &gt;&#34;</span>, <span style=color:#e6db74>&#34; &amp;gt;&#34;</span>, <span style=color:#e6db74>&#34;&lt;&amp;nbsp;&#34;</span>, <span style=color:#e6db74>&#34;&amp;lt;&amp;nbsp;&#34;</span>, <span style=color:#e6db74>&#34;&amp;nbsp;&gt;&#34;</span>, <span style=color:#e6db74>&#34;&amp;nbsp;&amp;gt;&#34;</span>);
</span></span><span style=display:flex><span>$arrReplace <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#34;&lt;&#34;</span>, <span style=color:#e6db74>&#34;&amp;lt;&#34;</span>, <span style=color:#e6db74>&#34;&gt;&#34;</span>, <span style=color:#e6db74>&#34;&amp;gt;&#34;</span>, <span style=color:#e6db74>&#34;&lt;&#34;</span>, <span style=color:#e6db74>&#34;&amp;lt;&#34;</span>, <span style=color:#e6db74>&#34;&gt;&#34;</span>, <span style=color:#e6db74>&#34;&amp;gt;&#34;</span>);
</span></span><span style=display:flex><span>$inTxt <span style=color:#f92672>=</span> <span style=color:#a6e22e>str_replace</span>($arrSearch, $arrReplace, $inTxt);
</span></span></code></pre></div><p>Step 3) At the same place (from where you deleted the lines), add the following lines:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$inTxt <span style=color:#f92672>=</span> <span style=color:#a6e22e>strip_tags</span>($inTxt);
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>PHP_VERSION</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>5.0</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  $inTxt <span style=color:#f92672>=</span> <span style=color:#a6e22e>html_entity_decode</span>($inTxt, <span style=color:#a6e22e>ENT_QUOTES</span>, <span style=color:#e6db74>&#34;UTF-8&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>   $arrSearch <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#34;&amp;lt;&#34;</span>, <span style=color:#e6db74>&#34;&amp;gt;&#34;</span>, <span style=color:#e6db74>&#34;&amp;nbsp;&#34;</span>, <span style=color:#e6db74>&#34;&amp;amp;&#34;</span>);
</span></span><span style=display:flex><span>   $arrReplace <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#34;&lt;&#34;</span>, <span style=color:#e6db74>&#34;&gt;&#34;</span>, <span style=color:#e6db74>&#34; &#34;</span>, <span style=color:#e6db74>&#34;&amp;&#34;</span>);
</span></span><span style=display:flex><span>   $inTxt <span style=color:#f92672>=</span> <span style=color:#a6e22e>str_replace</span>($arrSearch, $arrReplace, $inTxt);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Step 4) Save the file. That&rsquo;s it. You&rsquo;re done.</p><p>What we just did was strip out all the extraneous html formatting added by your editor and then convert the html entities into the characters that we want.</p><p>**IMPORTANT: **After this hack, you should write your code in visual mode. If you want to display some html code to your readers and write it in html mode of the editor then it might go boink. Otherwise it should be simple enough to create a new tag so that one set html editor code works and for another set, visual editor code works. But I would definitely recommend against it and anyways writing all code in visual mode, just like your other parts of your posts as its much more intuitive to write and easier to maintain and port to newer platforms.</p></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>¬© 2024 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>