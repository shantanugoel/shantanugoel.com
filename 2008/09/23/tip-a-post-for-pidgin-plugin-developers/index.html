<!doctype html><html lang=en><head><title>TIP: A Post For Pidgin Plugin Developers :: Shantanu Vs The World</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Recently I wrote a small autoreply-answering-machine app for pidgin with a simple premise. Send custom automatic replies to different people when they message you and came across a strange bug. It never sent the reply when you received the first message from someone. I was using the &ldquo;ReceivedImMessage&rdquo; signal over d-bus (or &ldquo;received-im-message&rdquo; for the plugin writers). What I found initially looked to be a gross and basic error by pidgin developers, but later found that it is indeed a good design and thought that I&rsquo;ll make a post about it for the benefit of fellow pidgin plugin/app developers."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://shantanugoel.com/2008/09/23/tip-a-post-for-pidgin-plugin-developers/><link rel=stylesheet href=https://shantanugoel.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css><link rel=stylesheet href=https://shantanugoel.com/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css><link rel=stylesheet href=https://shantanugoel.com/css/fonts.min.90c955c31dd7c0e05aae3d4f583d4d8a2af799d69c961337eaf2a825063a55dd.css><link rel=stylesheet href=https://shantanugoel.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css><link rel=stylesheet href=https://shantanugoel.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://shantanugoel.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css><link rel=stylesheet href=https://shantanugoel.com/css/main.min.1d8be2dd1b5de9fdaed058c8c59fcf4485f36619574abfb47ed0cfda4812c16d.css><link rel=stylesheet href=https://shantanugoel.com/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css><link rel=stylesheet href=https://shantanugoel.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css><link rel=stylesheet href=https://shantanugoel.com/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css><link rel=stylesheet href=https://shantanugoel.com/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css><link rel=stylesheet href=https://shantanugoel.com/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css><link rel=stylesheet href=https://shantanugoel.com/css/terminal.min.27a3af30c33c5e1d42bf51e61792cf1bd9390c0e57db917179413a769329355c.css><link rel=stylesheet href=https://shantanugoel.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel="shortcut icon" href=https://shantanugoel.com/favicon.png><link rel=apple-touch-icon href=https://shantanugoel.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="TIP: A Post For Pidgin Plugin Developers"><meta property="og:description" content="Recently I wrote a small autoreply-answering-machine app for pidgin with a simple premise. Send custom automatic replies to different people when they message you and came across a strange bug. It never sent the reply when you received the first message from someone. I was using the &ldquo;ReceivedImMessage&rdquo; signal over d-bus (or &ldquo;received-im-message&rdquo; for the plugin writers). What I found initially looked to be a gross and basic error by pidgin developers, but later found that it is indeed a good design and thought that I&rsquo;ll make a post about it for the benefit of fellow pidgin plugin/app developers."><meta property="og:url" content="https://shantanugoel.com/2008/09/23/tip-a-post-for-pidgin-plugin-developers/"><meta property="og:site_name" content="Shantanu Vs The World"><meta property="og:image" content="https://shantanugoel.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="Code"><meta property="article:section" content="Tinker"><meta property="article:published_time" content="2008-09-23 15:30:32 +0000 UTC"></head><body><div class=container><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Shantanu vs The World</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;‚ñæ</li><li><ul class=menu__dropdown><li><a href=https://x.com/shantanugoel/>üê§</a></li><li><a href=/>/blog</a></li><li><a href=/>/notes</a></li><li><a href=/about>/about</a></li><li><a href=/archives>/archives</a></li><li><a href=/categories>/categories</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=https://x.com/shantanugoel/>üê§</a></li><li><a href=/>/blog</a></li><li><a href=/>/notes</a></li><li><a href=/about>/about</a></li><li><a href=/archives>/archives</a></li><li><a href=/categories>/categories</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://shantanugoel.com/2008/09/23/tip-a-post-for-pidgin-plugin-developers/>TIP: A Post For Pidgin Plugin Developers</a></h1><div class=post-meta><time class=post-date>2008-09-23</time><span class=post-author>Shantanu Goel</span></div><span class=post-tags>#<a href=https://shantanugoel.com/tags/answering-machine/>Answering Machine</a>&nbsp;
#<a href=https://shantanugoel.com/tags/d-bus/>d-bus</a>&nbsp;
#<a href=https://shantanugoel.com/tags/displayed-im-message/>displayed-im-message</a>&nbsp;
#<a href=https://shantanugoel.com/tags/displayedimmessage/>DisplayedImMessage</a>&nbsp;
#<a href=https://shantanugoel.com/tags/missing-conversation-id/>missing conversation id</a>&nbsp;
#<a href=https://shantanugoel.com/tags/pidgin/>pidgin</a>&nbsp;
#<a href=https://shantanugoel.com/tags/plugin-developers/>plugin developers</a>&nbsp;
#<a href=https://shantanugoel.com/tags/received-im-message/>received-im-message</a>&nbsp;
#<a href=https://shantanugoel.com/tags/receivedimmessage/>ReceivedImMessage</a>&nbsp;
#<a href=https://shantanugoel.com/tags/seanegen/>seanegen</a>&nbsp;</span><div class=post-content><div><p>Recently I wrote a small autoreply-answering-machine app for pidgin with a simple premise. Send custom automatic replies to different people when they message you and came across a strange bug. It never sent the reply when you received the first message from someone. I was using the &ldquo;ReceivedImMessage&rdquo; signal over d-bus (or &ldquo;received-im-message&rdquo; for the plugin writers). What I found initially looked to be a gross and basic error by pidgin developers, but later found that it is indeed a good design and thought that I&rsquo;ll make a post about it for the benefit of fellow pidgin plugin/app developers.</p><p>After a bit of debugging I saw that when I received the ReceivedImMessage signal for the first message, the &ldquo;Conversation ID&rdquo; field is not a valid value but 0. Thereafter, I got the correct value every time. Searching on the google didn&rsquo;t reveal much except a few other people complaining about the same and someone saying that this is a bug because pidgin first sends the signal and then creates the conversation while it should be the other way round.¬† Fair enough. But then&mldr;</p><p>Then I came across a short explanation by a pidgin developer, seanegen, (sorry lost the link somewhere). Basically, the reason behind this is that all the checks (e.g. Blacklists etc) are performed after one gets this signal, and hence they dont create the window otherwise it might be created even if you have blocked the person who is sending you the message. Perfect explanation.</p><p>But, what&rsquo;s the solution. Simple..Use the &ldquo;DisplayedImMessage&rdquo; (or &ldquo;displayed-im-message&rdquo; signal) which is sent, once the conversation has been created. That&rsquo;s it. Hope that this post benefit you.</p></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>¬© 2024 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>