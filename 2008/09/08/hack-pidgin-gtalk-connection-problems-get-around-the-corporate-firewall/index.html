<!doctype html><html lang=en><head><title>Hack: Pidgin-Gtalk Connection Problems - Get Around The Corporate Firewall :: Shantanu Vs The World</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="I recently wrote a simple answering machine program/plugin for pidgin and someone asked me to port it to 32 bit. So I fired up pidgin within my virtual box installation at work (as I have only a 64 bit machine at home) but couldn&rsquo;t get it to connect. Tried all sorts of methods found over the net of changing ports etc, set port forwarding in Virtual Box NAT, even switched to using a bridged host interface but still no go."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://shantanugoel.com/2008/09/08/hack-pidgin-gtalk-connection-problems-get-around-the-corporate-firewall/><link rel=stylesheet href=https://shantanugoel.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css><link rel=stylesheet href=https://shantanugoel.com/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css><link rel=stylesheet href=https://shantanugoel.com/css/fonts.min.90c955c31dd7c0e05aae3d4f583d4d8a2af799d69c961337eaf2a825063a55dd.css><link rel=stylesheet href=https://shantanugoel.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css><link rel=stylesheet href=https://shantanugoel.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://shantanugoel.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css><link rel=stylesheet href=https://shantanugoel.com/css/main.min.1d8be2dd1b5de9fdaed058c8c59fcf4485f36619574abfb47ed0cfda4812c16d.css><link rel=stylesheet href=https://shantanugoel.com/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css><link rel=stylesheet href=https://shantanugoel.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css><link rel=stylesheet href=https://shantanugoel.com/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css><link rel=stylesheet href=https://shantanugoel.com/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css><link rel=stylesheet href=https://shantanugoel.com/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css><link rel=stylesheet href=https://shantanugoel.com/css/terminal.min.27a3af30c33c5e1d42bf51e61792cf1bd9390c0e57db917179413a769329355c.css><link rel=stylesheet href=https://shantanugoel.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel="shortcut icon" href=https://shantanugoel.com/favicon.png><link rel=apple-touch-icon href=https://shantanugoel.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Hack: Pidgin-Gtalk Connection Problems - Get Around The Corporate Firewall"><meta property="og:description" content="I recently wrote a simple answering machine program/plugin for pidgin and someone asked me to port it to 32 bit. So I fired up pidgin within my virtual box installation at work (as I have only a 64 bit machine at home) but couldn&rsquo;t get it to connect. Tried all sorts of methods found over the net of changing ports etc, set port forwarding in Virtual Box NAT, even switched to using a bridged host interface but still no go."><meta property="og:url" content="https://shantanugoel.com/2008/09/08/hack-pidgin-gtalk-connection-problems-get-around-the-corporate-firewall/"><meta property="og:site_name" content="Shantanu Vs The World"><meta property="og:image" content="https://shantanugoel.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="Stuff"><meta property="article:published_time" content="2008-09-08 15:30:38 +0000 UTC"></head><body><div class=container><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Shantanu vs The World</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;‚ñæ</li><li><ul class=menu__dropdown><li><a href=https://x.com/shantanugoel/>üê§</a></li><li><a href=/>/blog</a></li><li><a href=/>/notes</a></li><li><a href=/about>/about</a></li><li><a href=/archives>/archives</a></li><li><a href=/categories>/categories</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=https://x.com/shantanugoel/>üê§</a></li><li><a href=/>/blog</a></li><li><a href=/>/notes</a></li><li><a href=/about>/about</a></li><li><a href=/archives>/archives</a></li><li><a href=/categories>/categories</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://shantanugoel.com/2008/09/08/hack-pidgin-gtalk-connection-problems-get-around-the-corporate-firewall/>Hack: Pidgin-Gtalk Connection Problems - Get Around The Corporate Firewall</a></h1><div class=post-meta><time class=post-date>2008-09-08</time><span class=post-author>Shantanu Goel</span></div><span class=post-tags>#<a href=https://shantanugoel.com/tags/bypass-firewall/>bypass firewall</a>&nbsp;
#<a href=https://shantanugoel.com/tags/corporate-firewall/>Corporate firewall</a>&nbsp;
#<a href=https://shantanugoel.com/tags/encryption/>encryption</a>&nbsp;
#<a href=https://shantanugoel.com/tags/gmail/>gmail</a>&nbsp;
#<a href=https://shantanugoel.com/tags/google/>google</a>&nbsp;
#<a href=https://shantanugoel.com/tags/google-talk/>google talk</a>&nbsp;
#<a href=https://shantanugoel.com/tags/gtalk/>gtalk</a>&nbsp;
#<a href=https://shantanugoel.com/tags/im/>IM</a>&nbsp;
#<a href=https://shantanugoel.com/tags/instant-messenger/>Instant Messenger</a>&nbsp;
#<a href=https://shantanugoel.com/tags/monitor/>monitor</a>&nbsp;
#<a href=https://shantanugoel.com/tags/pidgin/>pidgin</a>&nbsp;
#<a href=https://shantanugoel.com/tags/snoop/>snoop</a>&nbsp;
#<a href=https://shantanugoel.com/tags/ssl/>ssl</a>&nbsp;
#<a href=https://shantanugoel.com/tags/talk.google.com/>talk.google.com</a>&nbsp;
#<a href=https://shantanugoel.com/tags/yahoo/>yahoo</a>&nbsp;</span><div class=post-content><div><p>I recently wrote a simple answering machine program/plugin for pidgin and someone asked me to port it to 32 bit. So I fired up pidgin within my virtual box installation at work (as I have only a 64 bit machine at home) but couldn&rsquo;t get it to connect. Tried all sorts of methods found over the net of changing ports etc, set port forwarding in Virtual Box NAT, even switched to using a bridged host interface but still no go. On a whim, installed pidgin in the host, i.e., windows and still the same issue. Hmm, interesting.. But wait, gtalk client works, then what gives.</p><p>Well, after a bit of snooping around, discovered that it&rsquo;s a special funda that my company employs (and probably yours too) to monitor your IM conversations. The server talk.google.com was redirected to another server set up by my company that masquerades as gtalk server and tries to act as a &ldquo;Man In The Middle&rdquo; to hijack your connection and listen to everything while you live in the fantasy that since its an &ldquo;SSL encrypted&rdquo; connection, everything is secure. However, &ldquo;fortunately&rdquo; pidgin refuses to connect here (More details in the end)</p><p>But as they say, rules are meant to be bent and broken. Here, is a simple way 3-step procedure to circumvent around this.</p><ol><li><p>Open up your gtalk account settings in pidgin and go to Advanced tab.</p></li><li><p>Check &ldquo;Force old port&rdquo;, uncheck &ldquo;plaintext auth&rdquo; and uncheck &ldquo;Require SSL/TLS&rdquo;. Also change &ldquo;Connect port&rdquo; to 443.</p></li><li><p>The <strong>main</strong> part: Go to an online nslookup service and do an nslookup for talk.google.com. Put the IP that you get in place of &ldquo;talk.google.com&rdquo; in the settings.</p></li></ol><p>That&rsquo;s it. Go and chat away. (or if you want to know the reasoning behind this, hit the link below)</p><p><strong>More Details:</strong></p><p>Skip this if you want, only for the people who are interested, here are some details on why pidgin does not connect in this situation and how you can find out if your company is using this tactic.</p><ol><li>How pidgin tries to connect to gtalk servers is that first it makes a connection to talk.google.com and gets and verifies the certificate from there. Then it tries to connect to gmail.com. Now there can be various situations:</li></ol><pre><code>1. 


  1. Its unable to complete the transaction in the first place because you didn't use the port 443, so firewall blocks it hence it can't communand tries to fallback to plaintext authorization which is not supported by google and hence it fails.


  2. You chose correct settings to go around firewall but now after verifying certificate, it just keeps &quot;connecting&quot;. Basically, it passes through the talk.google.com phase and then tries to connect to gmail.com (don't know why) and gets stuck on this step because the company is masquerading the gtalk server but not the gmail server.
</code></pre><ol start=2><li>Look for the following symptoms to see if your company is doing &ldquo;something&rdquo;</li></ol><pre><code>1. 


  1. Do &quot;nslookup talk.google.com&quot; in your command prompt (not through web), then say you get an IP x.y.z.w. Now do &quot;nslookup x.y.z.w&quot; again in command prompt. Now you will get the real name of the server that is your company's. Can try this for other IM servers as well (e.g. yahoo)


  2. When pidgin asks you to verify the certificate, don't take it lightly. Just fetch and see the certificate and it'll definitely be pointing to some other domain.
</code></pre><p>Enough fundas for today. Let me know if this helped you out or if you have your own techniques of finding and circumventing around such stuff.</p></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>¬© 2024 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>