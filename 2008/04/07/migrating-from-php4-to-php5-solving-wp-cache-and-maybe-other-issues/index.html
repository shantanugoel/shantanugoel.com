<!doctype html><html lang=en><head><title>Migrating From PHP4 To PHP5: Solving WP-Cache (and maybe other) Issues :: Shantanu Vs The World</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Situation: You are migrating your WordPress blog from PHP4 to PHP5 (intentionally or being forced to as you web host won&rsquo;t support PHP4 anymore). Most of the times, this is as simple as adding some simple lines to .htaccess (e.g. AddHandler application/x-httpd-php5 .php ). And you might not notice any issues. But many of you still do. The issues range from weird page layouts, to some controls not working, to some errors popping up here and there, and probably your blog not even displaying. This occurs because even though WordPress is PHP5 compatible, some of the plugins you are using might not be. But even if you ensure that all your plugins are PHP5 compatible, there is still one more problem that I just saw today.
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://shantanugoel.com/2008/04/07/migrating-from-php4-to-php5-solving-wp-cache-and-maybe-other-issues/><script async src="https://www.googletagmanager.com/gtag/js?id=G-5CKCTSFXW8"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5CKCTSFXW8")}</script><link rel=stylesheet href=https://shantanugoel.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css><link rel=stylesheet href=https://shantanugoel.com/css/code.min.628b83582b7e3ce5fbec137a2c22e9dd728066c2a25433bc713f3c02f60e9d0d.css><link rel=stylesheet href=https://shantanugoel.com/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css><link rel=stylesheet href=https://shantanugoel.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css><link rel=stylesheet href=https://shantanugoel.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://shantanugoel.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css><link rel=stylesheet href=https://shantanugoel.com/css/main.min.89e1ce68f5ae8bacb023257282bc8b962c837342140e7c122c46b31a39bebc5f.css><link rel=stylesheet href=https://shantanugoel.com/css/menu.min.036f7f3c01b34c968c3c11f671600515ea8247bdb345694d1c244c92edc67a24.css><link rel=stylesheet href=https://shantanugoel.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css><link rel=stylesheet href=https://shantanugoel.com/css/post.min.aee3bce7973384e650a306992c941e09dc6a1e22f04443c00fefb71a7e9484d2.css><link rel=stylesheet href=https://shantanugoel.com/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css><link rel=stylesheet href=https://shantanugoel.com/css/syntax.min.28d2d93e80d9fc88428d8438285537c167ec74544ef064da1cc0313254904b54.css><link rel=stylesheet href=https://shantanugoel.com/css/terminal.min.4dc14b43e2ad0b40e86536fbd75d5ba1ab079aa1b5da8271eced09310dfa1242.css><link rel=stylesheet href=https://shantanugoel.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel="shortcut icon" href=https://shantanugoel.com/favicon.png><link rel=apple-touch-icon href=https://shantanugoel.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Migrating From PHP4 To PHP5: Solving WP-Cache (and maybe other) Issues "><meta property="og:description" content="Situation: You are migrating your WordPress blog from PHP4 to PHP5 (intentionally or being forced to as you web host won&rsquo;t support PHP4 anymore). Most of the times, this is as simple as adding some simple lines to .htaccess (e.g. AddHandler application/x-httpd-php5 .php ). And you might not notice any issues. But many of you still do. The issues range from weird page layouts, to some controls not working, to some errors popping up here and there, and probably your blog not even displaying. This occurs because even though WordPress is PHP5 compatible, some of the plugins you are using might not be. But even if you ensure that all your plugins are PHP5 compatible, there is still one more problem that I just saw today.
"><meta property="og:url" content="https://shantanugoel.com/2008/04/07/migrating-from-php4-to-php5-solving-wp-cache-and-maybe-other-issues/"><meta property="og:site_name" content="Shantanu Vs The World"><meta property="og:image" content="https://shantanugoel.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2008-04-07 13:37:17 +0000 UTC"></head><body><div class=container><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Shantanu vs The World</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;‚ñæ</li><li><ul class=menu__dropdown><li><a href=https://github.com/shantanugoel/>üíª</a></li><li><a href=https://x.com/shantanugoel/>üê§</a></li><li><a href=/>/blog</a></li><li><a href=/notes>/notes</a></li><li><a href=/about>/about</a></li><li><a href=/archives>/archives</a></li><li><a href=/fun>/fun</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=https://github.com/shantanugoel/>üíª</a></li><li><a href=https://x.com/shantanugoel/>üê§</a></li><li><a href=/>/blog</a></li><li><a href=/notes>/notes</a></li><li><a href=/about>/about</a></li><li><a href=/archives>/archives</a></li><li><a href=/fun>/fun</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://shantanugoel.com/2008/04/07/migrating-from-php4-to-php5-solving-wp-cache-and-maybe-other-issues/>Migrating From PHP4 To PHP5: Solving WP-Cache (and maybe other) Issues</a></h1><div class=post-meta><time class=post-date>2008-04-07</time><span class=post-author>Shantanu Goel</span></div><div class=post-content><div><p><strong>Situation:</strong> You are migrating your WordPress blog from PHP4 to PHP5 (intentionally or being forced to as you web host won&rsquo;t support PHP4 anymore). Most of the times, this is as simple as adding some simple lines to .htaccess (e.g. <code>AddHandler application/x-httpd-php5 .php</code> ). And you might not notice any issues. But many of you still do. The issues range from weird page layouts, to some controls not working, to some errors popping up here and there, and probably your blog not even displaying. This occurs because even though WordPress is PHP5 compatible, some of the plugins you are using might not be. But even if you ensure that all your plugins are PHP5 compatible, there is still one more problem that I just saw today.</p><p>**Problem: **My host supports both PHP4 and PHP5. I decided to migrate <a href=http://blog.shantanugoel.com/>my personal blog</a> to PHP5 today by adding the aforementioned line to my .htaccess. Immediately, my blog disappeared, and in its place, all that was left was a few errors:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>[07-Apr-2008 12:11:49] PHP Warning: flock() expects parameter 1 to be resource, boolean given in /‚Ä¶/wp-cache-phase2.php on line 105  
</span></span><span style=display:flex><span>[07-Apr-2008 12:11:49] PHP Warning: fopen/‚Ä¶/wp-cache-e3ba4b7161eb59d50c5e976a0b66782a.meta) [&lt;a href=&#39;function.fopen&#39;&gt;function.fopen&lt;/a&gt;]: failed to open stream: Permission denied in /‚Ä¶/wp-cache-phase2.php on line 240  
</span></span><span style=display:flex><span>[07-Apr-2008 12:11:49] PHP Warning: fputs(): supplied argument is not a valid stream resource in /‚Ä¶/wp-cache-phase2.php on line 241
</span></span></code></pre></div><p>Note: I&rsquo;ve deleted the exact file paths above for security reasons.</p><p>It gave me an idea that it had something to do with wp-cache. When I tried to open the settings for wp-cache, it again gve error that web server doesn&rsquo;t have the permissions to write the file wp-cache-config.php, wp_cache_mutex.lock etc.</p><p><strong>Analysis:</strong> On checking the file permissions for these mentioned files, I found that they already belong to the user under which the web server runs. So, write permissions shouldn&rsquo;t have been a problem. I guessed that maybe this issue is because of another &ldquo;handler&rdquo; (x-httpd-php5) now trying to modify the files while earlier they were created by the php4 handler. But I couldn&rsquo;t change the permissions now because they were created by the web server and I can&rsquo;t modify/delete them through ssh/ftp under my username.</p><p>**Solution: **So, the solution (or workaround as you may call it) was to login to my cpanel, and use the &ldquo;File Manager&rdquo; there, since all operations done by it would also be carried out by the web-server. So, all I did was:</p><ol><li><p>Went back to PHP4</p></li><li><p>Disabled WP-Cache Plugin</p></li><li><p>Launched the file manager, deleted the wp-content/wp-cache-config.php and wp-content/cache/wp_cache_mutex.lock. Came out.</p></li><li><p>Enabled PHP5 in .htaccess</p></li><li><p>Enable the WP-Cache Plugin</p></li></ol><p>And that&rsquo;s it. My Personal Blog is now running happily over PHP5 goodness :). let me know if you have any comments about this or any other suggestions that are better than this workaround.</p><p><strong>Note:</strong> This problem might not be limited to WP-Cache alone. There might be other plugins as well having the same problem.</p><p>**Note2: **If you feel uncomfortable deleting any file, then make a copy of it through ssh/ftp (so that it is under your user name), delete the original file, and replace it by the copy you made. Now, you can give this file a permission of &ldquo;777&rdquo; (that is readable, writable, executable by all), so that the web server can also modify it.</p></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>¬© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>