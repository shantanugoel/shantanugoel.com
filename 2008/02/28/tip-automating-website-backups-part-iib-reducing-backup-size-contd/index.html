<!doctype html><html lang=en><head><title>TIP: Automating Website Backups - Part IIb (Reducing Backup Size Contd.) :: Shantanu Vs The World</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Last time, I had told you about how to reduce the backup size. Well, this is a short note further developing on the approaches discussed there. Basically, telling tar to backup only those files which have changed. For this, Linux has a command “find” which I am very fond of. You can give it a option “-newer” followed by a f”filename” and it will return the names of the files that are newer than filename."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://shantanugoel.com/2008/02/28/tip-automating-website-backups-part-iib-reducing-backup-size-contd/><link rel=stylesheet href=https://shantanugoel.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css><link rel=stylesheet href=https://shantanugoel.com/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css><link rel=stylesheet href=https://shantanugoel.com/css/fonts.min.90c955c31dd7c0e05aae3d4f583d4d8a2af799d69c961337eaf2a825063a55dd.css><link rel=stylesheet href=https://shantanugoel.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css><link rel=stylesheet href=https://shantanugoel.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://shantanugoel.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css><link rel=stylesheet href=https://shantanugoel.com/css/main.min.1d8be2dd1b5de9fdaed058c8c59fcf4485f36619574abfb47ed0cfda4812c16d.css><link rel=stylesheet href=https://shantanugoel.com/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css><link rel=stylesheet href=https://shantanugoel.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css><link rel=stylesheet href=https://shantanugoel.com/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css><link rel=stylesheet href=https://shantanugoel.com/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css><link rel=stylesheet href=https://shantanugoel.com/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css><link rel=stylesheet href=https://shantanugoel.com/css/terminal.min.27a3af30c33c5e1d42bf51e61792cf1bd9390c0e57db917179413a769329355c.css><link rel=stylesheet href=https://shantanugoel.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel="shortcut icon" href=https://shantanugoel.com/favicon.png><link rel=apple-touch-icon href=https://shantanugoel.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content=" TIP: Automating Website Backups - Part IIb (Reducing Backup Size Contd.)"><meta property="og:description" content="Last time, I had told you about how to reduce the backup size. Well, this is a short note further developing on the approaches discussed there. Basically, telling tar to backup only those files which have changed. For this, Linux has a command “find” which I am very fond of. You can give it a option “-newer” followed by a f”filename” and it will return the names of the files that are newer than filename."><meta property="og:url" content="https://shantanugoel.com/2008/02/28/tip-automating-website-backups-part-iib-reducing-backup-size-contd/"><meta property="og:site_name" content="Shantanu Vs The World"><meta property="og:image" content="https://shantanugoel.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="Tinker"><meta property="article:published_time" content="2008-02-28 04:00:00 +0000 UTC"></head><body><div class=container><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Shantanu vs The World</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://x.com/shantanugoel/>🐤</a></li><li><a href=/>/blog</a></li><li><a href=/notes>/notes</a></li><li><a href=/about>/about</a></li><li><a href=/archives>/archives</a></li><li><a href=/categories>/categories</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=https://x.com/shantanugoel/>🐤</a></li><li><a href=/>/blog</a></li><li><a href=/notes>/notes</a></li><li><a href=/about>/about</a></li><li><a href=/archives>/archives</a></li><li><a href=/categories>/categories</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://shantanugoel.com/2008/02/28/tip-automating-website-backups-part-iib-reducing-backup-size-contd/>TIP: Automating Website Backups - Part IIb (Reducing Backup Size Contd.)</a></h1><div class=post-meta><time class=post-date>2008-02-28</time><span class=post-author>Shantanu Goel</span></div><span class=post-tags>#<a href=https://shantanugoel.com/tags/attachment/>attachment</a>&nbsp;
#<a href=https://shantanugoel.com/tags/automate-site-backup/>automate site backup</a>&nbsp;
#<a href=https://shantanugoel.com/tags/automate-website-backup/>automate website backup</a>&nbsp;
#<a href=https://shantanugoel.com/tags/automated-backup/>automated backup</a>&nbsp;
#<a href=https://shantanugoel.com/tags/automatically-e-mail-site-backup/>automatically e-mail site backup</a>&nbsp;
#<a href=https://shantanugoel.com/tags/backup/>backup</a>&nbsp;
#<a href=https://shantanugoel.com/tags/cron/>cron</a>&nbsp;
#<a href=https://shantanugoel.com/tags/crontab/>crontab</a>&nbsp;
#<a href=https://shantanugoel.com/tags/e-mail-limit/>e-mail limit</a>&nbsp;
#<a href=https://shantanugoel.com/tags/find/>find</a>&nbsp;
#<a href=https://shantanugoel.com/tags/incremental-backup/>incremental backup</a>&nbsp;
#<a href=https://shantanugoel.com/tags/mtime/>mtime</a>&nbsp;
#<a href=https://shantanugoel.com/tags/newer/>newer</a>&nbsp;
#<a href=https://shantanugoel.com/tags/site-backup/>site backup</a>&nbsp;
#<a href=https://shantanugoel.com/tags/tar/>tar</a>&nbsp;
#<a href=https://shantanugoel.com/tags/webhosting/>Webhosting</a>&nbsp;
#<a href=https://shantanugoel.com/tags/webhosting-tip/>webhosting tip</a>&nbsp;
#<a href=https://shantanugoel.com/tags/website-backup/>website backup</a>&nbsp;
#<a href=https://shantanugoel.com/tags/webspace-limit/>webspace limit</a>&nbsp;</span><div class=post-content><div><p><a href=http://tech.shantanugoel.com/2008/02/25/tip-automating-website-backups-part-ii-reducing-backup-size.html>Last time</a>, I had told you about how to reduce the backup size. Well, this is a short note further developing on the approaches discussed there. Basically, telling tar to backup only those files which have changed. For this, Linux has a command “find” which I am very fond of. You can give it a option “-newer” followed by a f”<em>filename</em>” and it will return the names of the files that are newer than <em>filename</em>.</p><p>So, the command given above will find all the files that have changed since you took the backup “<em>backup_x.tgz</em>” and store those filenames and paths into “_files.txt”. _The “-type f” option makes sure that only filenames are listed and not directory names, because tar creates a lot of issues when presented with directory names (Explore yourself about this).</p><p>Now, all we have to do is give this “<em>files.txt</em>” to tar as an input to tell it which files to archive.</p><blockquote></blockquote><p>The “-T files.txt” option makes this happen. Moreover, I have introduced 2 new options here, that were not present in our last part. They are:</p><blockquote><blockquote></blockquote></blockquote><blockquote><blockquote><ul><li>p – Tells tar to preserve file permissions</li></ul></blockquote></blockquote><blockquote><blockquote><ul><li>G – Tells tar to ignore any file read errors etc and continue</li></ul></blockquote></blockquote><p>Apart from this, you can also take a look at the “-mtime x” option for find command which lets you specify to list files which have changed in past x days. There are other similar options available for find. Look at “man find” and take your pick. Similar options exist for tar, but I have had a lot of weird issues using them, so I’d recommend sticking with this two step process of “find” followed by “tar”.</p><p>Now, the above mentioned commands and options can be used in innumerous ways and combinations to achieve your perfect balance of space and ease of use etc for backups. I’ll list down a sample script here, that will make a full backup on every first day of the week, and then make incremental backups over each day for rest 6 days. So, you’ll save a lot of space (more than 5 times), but you will have to use all 7 backup files to make a full restore. (I’m listing just the backup part, you can add the “mutt” command yourself, for e-mailing as mentioned in <a href=http://tech.shantanugoel.com/2008/02/17/tip-automating-website-backups.html>Part I</a>)</p><blockquote><blockquote></blockquote></blockquote><p>That’s it for today. Lemme know if you have any doubts, or if you would like to see any other questions answered in this series. The question that will be answered next time is:</p><p>**Q2: **Cron? Using tar, making up the script file is enough command line for me. Isn’t there an easy way?</p></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2024 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>